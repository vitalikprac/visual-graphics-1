(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))D(w);new MutationObserver(w=>{for(const L of w)if(L.type==="childList")for(const y of L.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&D(y)}).observe(document,{childList:!0,subtree:!0});function R(w){const L={};return w.integrity&&(L.integrity=w.integrity),w.referrerpolicy&&(L.referrerPolicy=w.referrerpolicy),w.crossorigin==="use-credentials"?L.credentials="include":w.crossorigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function D(w){if(w.ep)return;w.ep=!0;const L=R(w);fetch(w.href,L)}})();(function(a,h){typeof define=="function"&&define.amd?define([],h):window.m4=h()})(globalThis,function(){let a=Float32Array;function h(r){const e=a;return a=r,e}function R(r,e,n){n=n||new a(16);var o=e[0*4+0],i=e[0*4+1],u=e[0*4+2],t=e[0*4+3],g=e[1*4+0],x=e[1*4+1],_=e[1*4+2],m=e[1*4+3],l=e[2*4+0],f=e[2*4+1],E=e[2*4+2],M=e[2*4+3],P=e[3*4+0],S=e[3*4+1],B=e[3*4+2],b=e[3*4+3],W=r[0*4+0],F=r[0*4+1],z=r[0*4+2],N=r[0*4+3],O=r[1*4+0],k=r[1*4+1],q=r[1*4+2],H=r[1*4+3],j=r[2*4+0],K=r[2*4+1],J=r[2*4+2],$=r[2*4+3],s=r[3*4+0],d=r[3*4+1],ar=r[3*4+2],tr=r[3*4+3];return n[0]=o*W+i*O+u*j+t*s,n[1]=o*F+i*k+u*K+t*d,n[2]=o*z+i*q+u*J+t*ar,n[3]=o*N+i*H+u*$+t*tr,n[4]=g*W+x*O+_*j+m*s,n[5]=g*F+x*k+_*K+m*d,n[6]=g*z+x*q+_*J+m*ar,n[7]=g*N+x*H+_*$+m*tr,n[8]=l*W+f*O+E*j+M*s,n[9]=l*F+f*k+E*K+M*d,n[10]=l*z+f*q+E*J+M*ar,n[11]=l*N+f*H+E*$+M*tr,n[12]=P*W+S*O+B*j+b*s,n[13]=P*F+S*k+B*K+b*d,n[14]=P*z+S*q+B*J+b*ar,n[15]=P*N+S*H+B*$+b*tr,n}function D(r,e,n){return n=n||new a(3),n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n}function w(r,e,n){return n=n||new a(3),n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n}function L(r,e,n){return n=n||new a(3),n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n}function y(r,e){e=e||new a(3);var n=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return n>1e-5&&(e[0]=r[0]/n,e[1]=r[1]/n,e[2]=r[2]/n),e}function V(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])}function Q(r){return r[0]*r[0]+r[1]*r[1]+r[2]*r[2]}function C(r,e,n){return n=n||new a(3),n[0]=r[1]*e[2]-r[2]*e[1],n[1]=r[2]*e[0]-r[0]*e[2],n[2]=r[0]*e[1]-r[1]*e[0],n}function G(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function I(r,e){const n=r[0]-e[0],o=r[1]-e[1],i=r[2]-e[2];return n*n+o*o+i*i}function nr(r,e){return Math.sqrt(I(r,e))}function cr(r){return r=r||new a(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function rr(r,e){return e=e||new a(16),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15],e}function er(r,e,n,o){o=o||new a(16);var i=y(w(r,e)),u=y(C(n,i)),t=y(C(i,u));return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=0,o[4]=t[0],o[5]=t[1],o[6]=t[2],o[7]=0,o[8]=i[0],o[9]=i[1],o[10]=i[2],o[11]=0,o[12]=r[0],o[13]=r[1],o[14]=r[2],o[15]=1,o}function or(r,e,n,o,i){i=i||new a(16);var u=Math.tan(Math.PI*.5-.5*r),t=1/(n-o);return i[0]=u/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=u,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+o)*t,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*o*t*2,i[15]=0,i}function lr(r,e,n,o,i,u,t){return t=t||new a(16),t[0]=2/(e-r),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2/(o-n),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2/(i-u),t[11]=0,t[12]=(r+e)/(r-e),t[13]=(n+o)/(n-o),t[14]=(i+u)/(i-u),t[15]=1,t}function Ar(r,e,n,o,i,u,t){t=t||new a(16);var g=e-r,x=o-n,_=u-i;return t[0]=2*i/g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i/x,t[6]=0,t[7]=0,t[8]=(r+e)/g,t[9]=(o+n)/x,t[10]=-(u+i)/_,t[11]=-1,t[12]=0,t[13]=0,t[14]=-2*i*u/_,t[15]=0,t}function Rr(r,e,n,o){return o=o||new a(16),o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=r,o[13]=e,o[14]=n,o[15]=1,o}function Ur(r,e,n,o,i){i=i||new a(16);var u=r[0],t=r[1],g=r[2],x=r[3],_=r[1*4+0],m=r[1*4+1],l=r[1*4+2],f=r[1*4+3],E=r[2*4+0],M=r[2*4+1],P=r[2*4+2],S=r[2*4+3],B=r[3*4+0],b=r[3*4+1],W=r[3*4+2],F=r[3*4+3];return r!==i&&(i[0]=u,i[1]=t,i[2]=g,i[3]=x,i[4]=_,i[5]=m,i[6]=l,i[7]=f,i[8]=E,i[9]=M,i[10]=P,i[11]=S),i[12]=u*e+_*n+E*o+B,i[13]=t*e+m*n+M*o+b,i[14]=g*e+l*n+P*o+W,i[15]=x*e+f*n+S*o+F,i}function Mr(r,e){e=e||new a(16);var n=Math.cos(r),o=Math.sin(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=o,e[7]=0,e[8]=0,e[9]=-o,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Er(r,e,n){n=n||new a(16);var o=r[4],i=r[5],u=r[6],t=r[7],g=r[8],x=r[9],_=r[10],m=r[11],l=Math.cos(e),f=Math.sin(e);return n[4]=l*o+f*g,n[5]=l*i+f*x,n[6]=l*u+f*_,n[7]=l*t+f*m,n[8]=l*g-f*o,n[9]=l*x-f*i,n[10]=l*_-f*u,n[11]=l*m-f*t,r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n}function hr(r,e){e=e||new a(16);var n=Math.cos(r),o=Math.sin(r);return e[0]=n,e[1]=0,e[2]=-o,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=o,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pr(r,e,n){n=n||new a(16);var o=r[0*4+0],i=r[0*4+1],u=r[0*4+2],t=r[0*4+3],g=r[2*4+0],x=r[2*4+1],_=r[2*4+2],m=r[2*4+3],l=Math.cos(e),f=Math.sin(e);return n[0]=l*o-f*g,n[1]=l*i-f*x,n[2]=l*u-f*_,n[3]=l*t-f*m,n[8]=l*g+f*o,n[9]=l*x+f*i,n[10]=l*_+f*u,n[11]=l*m+f*t,r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n}function br(r,e){e=e||new a(16);var n=Math.cos(r),o=Math.sin(r);return e[0]=n,e[1]=o,e[2]=0,e[3]=0,e[4]=-o,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Wr(r,e,n){n=n||new a(16);var o=r[0*4+0],i=r[0*4+1],u=r[0*4+2],t=r[0*4+3],g=r[1*4+0],x=r[1*4+1],_=r[1*4+2],m=r[1*4+3],l=Math.cos(e),f=Math.sin(e);return n[0]=l*o+f*g,n[1]=l*i+f*x,n[2]=l*u+f*_,n[3]=l*t+f*m,n[4]=l*g-f*o,n[5]=l*x-f*i,n[6]=l*_-f*u,n[7]=l*m-f*t,r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n}function xr(r,e,n){n=n||new a(16);var o=r[0],i=r[1],u=r[2],t=Math.sqrt(o*o+i*i+u*u);o/=t,i/=t,u/=t;var g=o*o,x=i*i,_=u*u,m=Math.cos(e),l=Math.sin(e),f=1-m;return n[0]=g+(1-g)*m,n[1]=o*i*f+u*l,n[2]=o*u*f-i*l,n[3]=0,n[4]=o*i*f-u*l,n[5]=x+(1-x)*m,n[6]=i*u*f+o*l,n[7]=0,n[8]=o*u*f+i*l,n[9]=i*u*f-o*l,n[10]=_+(1-_)*m,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ir(r,e,n,o){o=o||new a(16);var i=e[0],u=e[1],t=e[2],g=Math.sqrt(i*i+u*u+t*t);i/=g,u/=g,t/=g;var x=i*i,_=u*u,m=t*t,l=Math.cos(n),f=Math.sin(n),E=1-l,M=x+(1-x)*l,P=i*u*E+t*f,S=i*t*E-u*f,B=i*u*E-t*f,b=_+(1-_)*l,W=u*t*E+i*f,F=i*t*E+u*f,z=u*t*E-i*f,N=m+(1-m)*l,O=r[0],k=r[1],q=r[2],H=r[3],j=r[4],K=r[5],J=r[6],$=r[7],s=r[8],d=r[9],ar=r[10],tr=r[11];return o[0]=M*O+P*j+S*s,o[1]=M*k+P*K+S*d,o[2]=M*q+P*J+S*ar,o[3]=M*H+P*$+S*tr,o[4]=B*O+b*j+W*s,o[5]=B*k+b*K+W*d,o[6]=B*q+b*J+W*ar,o[7]=B*H+b*$+W*tr,o[8]=F*O+z*j+N*s,o[9]=F*k+z*K+N*d,o[10]=F*q+z*J+N*ar,o[11]=F*H+z*$+N*tr,r!==o&&(o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o}function zr(r,e,n,o){return o=o||new a(16),o[0]=r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Nr(r,e,n,o,i){return i=i||new a(16),i[0]=e*r[0*4+0],i[1]=e*r[0*4+1],i[2]=e*r[0*4+2],i[3]=e*r[0*4+3],i[4]=n*r[1*4+0],i[5]=n*r[1*4+1],i[6]=n*r[1*4+2],i[7]=n*r[1*4+3],i[8]=o*r[2*4+0],i[9]=o*r[2*4+1],i[10]=o*r[2*4+2],i[11]=o*r[2*4+3],r!==i&&(i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i}function Yr(r,e,n,o){o=o||new a(16);const i=e[0],u=e[1],t=e[2],g=e[3],x=i+i,_=u+u,m=t+t,l=i*x,f=i*_,E=i*m,M=u*_,P=u*m,S=t*m,B=g*x,b=g*_,W=g*m,F=n[0],z=n[1],N=n[2];return o[0]=(1-(M+S))*F,o[1]=(f+W)*F,o[2]=(E-b)*F,o[3]=0,o[4]=(f-W)*z,o[5]=(1-(l+S))*z,o[6]=(P+B)*z,o[7]=0,o[8]=(E+b)*N,o[9]=(P-B)*N,o[10]=(1-(l+M))*N,o[11]=0,o[12]=r[0],o[13]=r[1],o[14]=r[2],o[15]=1,o}function Xr(r,e){const n=r[0],o=r[4],i=r[8],u=r[1],t=r[5],g=r[9],x=r[2],_=r[6],m=r[10],l=n+t+m;if(l>0){const f=.5/Math.sqrt(l+1);e[3]=.25/f,e[0]=(_-g)*f,e[1]=(i-x)*f,e[2]=(u-o)*f}else if(n>t&&n>m){const f=2*Math.sqrt(1+n-t-m);e[3]=(_-g)/f,e[0]=.25*f,e[1]=(o+u)/f,e[2]=(i+x)/f}else if(t>m){const f=2*Math.sqrt(1+t-n-m);e[3]=(i-x)/f,e[0]=(o+u)/f,e[1]=.25*f,e[2]=(g+_)/f}else{const f=2*Math.sqrt(1+m-n-t);e[3]=(u-o)/f,e[0]=(i+x)/f,e[1]=(g+_)/f,e[2]=.25*f}}function v(r,e,n,o){let i=m4.length(r.slice(0,3));const u=m4.length(r.slice(4,7)),t=m4.length(r.slice(8,11));p(r)<0&&(i=-i),e[0]=r[12],e[1]=r[13],e[2]=r[14];const x=m4.copy(r),_=1/i,m=1/u,l=1/t;x[0]*=_,x[1]*=_,x[2]*=_,x[4]*=m,x[5]*=m,x[6]*=m,x[8]*=l,x[9]*=l,x[10]*=l,Xr(x,n),o[0]=i,o[1]=u,o[2]=t}function p(r){var e=r[0],n=r[0*4+1],o=r[0*4+2],i=r[0*4+3],u=r[1*4+0],t=r[1*4+1],g=r[1*4+2],x=r[1*4+3],_=r[2*4+0],m=r[2*4+1],l=r[2*4+2],f=r[2*4+3],E=r[3*4+0],M=r[3*4+1],P=r[3*4+2],S=r[3*4+3],B=l*S,b=P*f,W=g*S,F=P*x,z=g*f,N=l*x,O=o*S,k=P*i,q=o*f,H=l*i,j=o*x,K=g*i,J=B*t+F*m+z*M-(b*t+W*m+N*M),$=b*n+O*m+H*M-(B*n+k*m+q*M),s=W*n+k*t+j*M-(F*n+O*t+K*M),d=N*n+q*t+K*m-(z*n+H*t+j*m);return 1/(e*J+u*$+_*s+E*d)}function T(r,e){e=e||new a(16);var n=r[0*4+0],o=r[0*4+1],i=r[0*4+2],u=r[0*4+3],t=r[1*4+0],g=r[1*4+1],x=r[1*4+2],_=r[1*4+3],m=r[2*4+0],l=r[2*4+1],f=r[2*4+2],E=r[2*4+3],M=r[3*4+0],P=r[3*4+1],S=r[3*4+2],B=r[3*4+3],b=f*B,W=S*E,F=x*B,z=S*_,N=x*E,O=f*_,k=i*B,q=S*u,H=i*E,j=f*u,K=i*_,J=x*u,$=m*P,s=M*l,d=t*P,ar=M*g,tr=t*l,Pr=m*g,Sr=n*P,Dr=M*o,Vr=n*l,Cr=m*o,Br=n*g,Fr=t*o,qr=b*g+z*l+N*P-(W*g+F*l+O*P),Hr=W*o+k*l+j*P-(b*o+q*l+H*P),jr=F*o+q*g+K*P-(z*o+k*g+J*P),Kr=O*o+H*g+J*l-(N*o+j*g+K*l),Z=1/(n*qr+t*Hr+m*jr+M*Kr);return e[0]=Z*qr,e[1]=Z*Hr,e[2]=Z*jr,e[3]=Z*Kr,e[4]=Z*(W*t+F*m+O*M-(b*t+z*m+N*M)),e[5]=Z*(b*n+q*m+H*M-(W*n+k*m+j*M)),e[6]=Z*(z*n+k*t+J*M-(F*n+q*t+K*M)),e[7]=Z*(N*n+j*t+K*m-(O*n+H*t+J*m)),e[8]=Z*($*_+ar*E+tr*B-(s*_+d*E+Pr*B)),e[9]=Z*(s*u+Sr*E+Cr*B-($*u+Dr*E+Vr*B)),e[10]=Z*(d*u+Dr*_+Br*B-(ar*u+Sr*_+Fr*B)),e[11]=Z*(Pr*u+Vr*_+Fr*E-(tr*u+Cr*_+Br*E)),e[12]=Z*(d*f+Pr*S+s*x-(tr*S+$*x+ar*f)),e[13]=Z*(Vr*S+$*i+Dr*f-(Sr*f+Cr*S+s*i)),e[14]=Z*(Sr*x+Fr*S+ar*i-(Br*S+d*i+Dr*x)),e[15]=Z*(Br*f+tr*i+Cr*x-(Vr*x+Fr*f+Pr*i)),e}function U(r,e,n){n=n||new a(4);for(var o=0;o<4;++o){n[o]=0;for(var i=0;i<4;++i)n[o]+=e[i]*r[i*4+o]}return n}function Y(r,e,n){n=n||new a(3);var o=e[0],i=e[1],u=e[2],t=o*r[0*4+3]+i*r[1*4+3]+u*r[2*4+3]+r[3*4+3];return n[0]=(o*r[0*4+0]+i*r[1*4+0]+u*r[2*4+0]+r[3*4+0])/t,n[1]=(o*r[0*4+1]+i*r[1*4+1]+u*r[2*4+1]+r[3*4+1])/t,n[2]=(o*r[0*4+2]+i*r[1*4+2]+u*r[2*4+2]+r[3*4+2])/t,n}function X(r,e,n){n=n||new a(3);var o=e[0],i=e[1],u=e[2];return n[0]=o*r[0*4+0]+i*r[1*4+0]+u*r[2*4+0],n[1]=o*r[0*4+1]+i*r[1*4+1]+u*r[2*4+1],n[2]=o*r[0*4+2]+i*r[1*4+2]+u*r[2*4+2],n}function ir(r,e,n){n=n||new a(3);var o=T(r),i=e[0],u=e[1],t=e[2];return n[0]=i*o[0*4+0]+u*o[0*4+1]+t*o[0*4+2],n[1]=i*o[1*4+0]+u*o[1*4+1]+t*o[1*4+2],n[2]=i*o[2*4+0]+u*o[2*4+1]+t*o[2*4+2],n}function vr(r,e){return e=e||new a(16),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}return{copy:vr,lookAt:er,addVectors:D,subtractVectors:w,scaleVector:L,distance:nr,distanceSq:I,normalize:y,compose:Yr,cross:C,decompose:v,dot:G,identity:cr,transpose:rr,length:V,lengthSq:Q,orthographic:lr,frustum:Ar,perspective:or,translation:Rr,translate:Ur,xRotation:Mr,yRotation:hr,zRotation:br,xRotate:Er,yRotate:pr,zRotate:Wr,axisRotation:xr,axisRotate:Ir,scaling:zr,scale:Nr,multiply:R,inverse:T,transformVector:U,transformPoint:Y,transformDirection:X,transformNormal:ir,setDefaultType:h}});var Qr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

uniform vec4 color;
uniform vec3 LightDirection;
uniform bool bDrawpoint;

varying vec3 v_normal;
varying vec3 v_surfaceToLight;
varying vec3 v_surfaceToView;
varying vec2 v_textcoord;

uniform sampler2D u_texture;

void main() {
    if (bDrawpoint == true) {
        gl_FragColor = color;
    }
    else
    {
    vec3 normal = normalize(v_normal);

    vec3 surfaceToLightDirection = normalize(v_surfaceToLight);
    vec3 surfaceToViewDirection = normalize(v_surfaceToView);
    vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);

    float shininess = 4.0;

    float innerLimit = cos(5.0 * 3.1415 / 180.0);
    float outerLimit = cos(15.0 * 3.1415 / 180.0);

    float dotFromDirection = dot(surfaceToLightDirection, -LightDirection);
    float inLight = smoothstep(outerLimit, innerLimit, dotFromDirection);
    float light = inLight * dot(normal, surfaceToLightDirection);
    float specular = inLight * pow(dot(normal, halfVector), shininess);

    vec4 TextureColor = texture2D(u_texture, v_textcoord);

    gl_FragColor = color;
    gl_FragColor.rgb *= light;
    gl_FragColor.rgb += specular;

    gl_FragColor += TextureColor;
    }
}`,Jr=`attribute vec3 vertex;
attribute vec3 normal;
attribute vec2 textcoord;

uniform mat4 ModelViewProjectionMatrix;
uniform mat4 WorldInverseTranspose;
uniform mat4 WorldMatrix;
uniform vec3 LightWorldPosition;
uniform vec3 ViewWorldPosition;

uniform vec2 ScalePointLocation;
uniform float ScaleValue;
uniform vec3 ScalePointWorldLocation;

uniform bool bDrawpoint;

varying vec3 v_normal;
varying vec3 v_surfaceToLight;
varying vec3 v_surfaceToView;
varying vec2 v_textcoord;

vec2 ScaleTextCoords(vec2 TextCoords, float Value, vec2 ScalePoint)
{
    vec3 CalculatedTextCoords = vec3(TextCoords, 1);

    mat3 ScaleMatrix = mat3(vec3(Value, 0.0, 0.0),
    vec3(0.0, Value, 0.0),
    vec3(0.0, 0.0, 1.0));

    mat3 TransformForward = mat3(vec3(1.0, 0.0, 0.0),
    vec3(0.0, 1.0, 0.0),
    vec3(-ScalePoint.x, -ScalePoint.y, 1.0));

    mat3 TransformBackward = mat3(vec3(1.0, 0.0, 0.0),
    vec3(0.0, 1.0, 0.0),
    vec3(ScalePoint.x, ScalePoint.y, 1.0));

    CalculatedTextCoords = TransformForward * CalculatedTextCoords;
    CalculatedTextCoords = ScaleMatrix * CalculatedTextCoords;
    CalculatedTextCoords = TransformBackward * CalculatedTextCoords;

    return CalculatedTextCoords.xy;
}

void main() {
    if (bDrawpoint == true) {
        gl_Position = ModelViewProjectionMatrix * vec4(ScalePointWorldLocation,1.0);
        gl_PointSize = 30.0;
    }
    else
    {
        gl_Position = ModelViewProjectionMatrix * vec4(vertex,1.0);

        v_normal = mat3(WorldInverseTranspose) * normal;

        vec3 surfaceWorldPosition = (WorldMatrix * vec4(vertex, 1.0)).xyz;
        v_surfaceToLight = LightWorldPosition - surfaceWorldPosition;
        v_surfaceToView = ViewWorldPosition - surfaceWorldPosition;

        v_textcoord = ScaleTextCoords(textcoord, ScaleValue, ScalePointLocation);

        gl_PointSize = 1.0;
    }
}`;function $r(a,h,R,D,w){var L=new Array(3),y=new Array(3),V=new Array(3),Q,C;this.setView=function(v,p,T){V=p===void 0?[0,0,10]:p,T=T===void 0?[0,1,0]:T,Q=v,xr(V,V),Ir(y,V),Yr(y,y,br(V,T)),Nr(y,T,y),xr(y,y),Xr(L,y,V)},this.getViewMatrix=function(){var v=[L[0],y[0],V[0],0,L[1],y[1],V[1],0,L[2],y[2],V[2],0,0,0,0,1];if(C!==void 0){var p=C[0]-v[0]*C[0]-v[4]*C[1]-v[8]*C[2],T=C[1]-v[1]*C[0]-v[5]*C[1]-v[9]*C[2],U=C[2]-v[2]*C[0]-v[6]*C[1]-v[10]*C[2];v[12]=p,v[13]=T,v[14]=U}return Q!==void 0&&(v[14]-=Q),v},this.getViewDistance=function(){return Q},this.setViewDistance=function(v){Q=v},this.getRotationCenter=function(){return C===void 0?[0,0,0]:C},this.setRotationCenter=function(v){C=v},this.setView(R,D,w),a.addEventListener("mousedown",lr,!1),a.addEventListener("touchstart",Ur,!1);function G(v,p){function T(X,ir,vr){var r=2*(X[0]*ir[0]+X[1]*ir[1]+X[2]*ir[2]);vr[0]=r*X[0]-ir[0],vr[1]=r*X[1]-ir[1],vr[2]=r*X[2]-ir[2]}xr(v,v),xr(p,p);var U=[0,0,0];zr(U,v,p),xr(U,U);var Y=[0,0,0];T(U,V,Y),T(v,Y,V),T(U,L,Y),T(v,Y,L),T(U,y,Y),T(v,Y,y)}var I,nr,cr,rr,er,or=!1;function lr(v){if(!or){or=!0,I=a.width/2,nr=a.height/2;var p=Math.min(I,nr);cr=p*p,document.addEventListener("mousemove",Ar,!1),document.addEventListener("mouseup",Rr,!1);var T=a.getBoundingClientRect();rr=v.clientX-T.left,er=v.clientY-T.top}}function Ar(v){if(!!or){var p=a.getBoundingClientRect(),T=v.clientX-p.left,U=v.clientY-p.top,Y=pr(rr,er),X=pr(T,U);G(Y,X),rr=T,er=U,h&&h()}}function Rr(v){or&&(document.removeEventListener("mousemove",Ar,!1),document.removeEventListener("mouseup",Rr,!1),or=!1)}function Ur(v){if(v.touches.length!=1){hr();return}v.preventDefault();var p=a.getBoundingClientRect();rr=v.touches[0].clientX-p.left,er=v.touches[0].clientY-p.top,a.addEventListener("touchmove",Mr,!1),a.addEventListener("touchend",Er,!1),a.addEventListener("touchcancel",hr,!1),touchStarted=!0,I=a.width/2,nr=a.height/2;var T=Math.min(I,nr);cr=T*T}function Mr(v){if(v.touches.length!=1||!touchStarted){hr();return}v.preventDefault();var p=a.getBoundingClientRect(),T=v.touches[0].clientX-p.left,U=v.touches[0].clientY-p.top,Y=pr(rr,er),X=pr(T,U);G(Y,X),rr=T,er=U,h&&h()}function Er(v){hr()}function hr(){touchStarted&&(touchStarted=!1,a.removeEventListener("touchmove",Mr,!1),a.removeEventListener("touchend",Er,!1),a.removeEventListener("touchcancel",hr,!1))}function pr(v,p){var T=v-I,U=nr-p,Y=T*L[0]+U*y[0],X=T*L[1]+U*y[1],ir=T*L[2]+U*y[2],vr=Y*Y+X*X+ir*ir;if(vr>cr)return[Y,X,ir];var r=Math.sqrt(cr-vr);return[Y+r*V[0],X+r*V[1],ir+r*V[2]]}function br(v,p){return v[0]*p[0]+v[1]*p[1]+v[2]*p[2]}function Wr(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])}function xr(v,p){var T=Wr(p);v[0]=p[0]/T,v[1]=p[1]/T,v[2]=p[2]/T}function Ir(v,p){v[0]=p[0],v[1]=p[1],v[2]=p[2]}function zr(v,p,T){v[0]=p[0]+T[0],v[1]=p[1]+T[1],v[2]=p[2]+T[2]}function Nr(v,p,T){v[0]=p[0]-T[0],v[1]=p[1]-T[1],v[2]=p[2]-T[2]}function Yr(v,p,T){v[0]=p[0]*T,v[1]=p[1]*T,v[2]=p[2]*T}function Xr(v,p,T){var U=p[1]*T[2]-p[2]*T[1],Y=p[2]*T[0]-p[0]*T[2],X=p[0]*T[1]-p[1]*T[0];v[0]=U,v[1]=Y,v[2]=X}}let c,Gr,A,Zr,Or=0,ur=0,fr=0,mr=.9;function gr(a){return a*Math.PI/180}function sr(a){this.name=a,this.iVertexBuffer=c.createBuffer(),this.iNormalBuffer=c.createBuffer(),this.iTextureBuffer=c.createBuffer(),this.iPointVertexBuffer=c.createBuffer(),this.count=0,this.BufferData=function(h,R,D){c.bindBuffer(c.ARRAY_BUFFER,this.iVertexBuffer),c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STREAM_DRAW),c.bindBuffer(c.ARRAY_BUFFER,this.iNormalBuffer),c.bufferData(c.ARRAY_BUFFER,new Float32Array(R),c.STREAM_DRAW),c.bindBuffer(c.ARRAY_BUFFER,this.iTextureBuffer),c.bufferData(c.ARRAY_BUFFER,new Float32Array(D),c.STREAM_DRAW),c.bindBuffer(c.ARRAY_BUFFER,this.iPointVertexBuffer),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,0]),c.DYNAMIC_DRAW),this.count=h.length/3},this.Draw=function(){c.uniform1i(A.iDrawPoint,!1),c.bindBuffer(c.ARRAY_BUFFER,this.iVertexBuffer),c.vertexAttribPointer(A.iAttribVertex,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(A.iAttribVertex),c.bindBuffer(c.ARRAY_BUFFER,this.iNormalBuffer),c.vertexAttribPointer(A.iNormalVertex,3,c.FLOAT,!0,0,0),c.enableVertexAttribArray(A.iNormalVertex),c.bindBuffer(c.ARRAY_BUFFER,this.iTextureBuffer),c.vertexAttribPointer(A.iTextureCoords,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(A.iTextureCoords),c.drawArrays(c.TRIANGLE_STRIP,0,this.count),c.uniform1i(A.iDrawPoint,!0),c.uniform3fv(A.iScalePointWorldLocation,[_r(ur,fr),Lr(ur,fr),yr(ur)]),c.bindBuffer(c.ARRAY_BUFFER,this.iVertexBuffer),c.vertexAttribPointer(A.iAttribVertex,3,c.FLOAT,!1,0,0),c.enableVertexAttribArray(A.iAttribVertex),c.drawArrays(c.POINTS,0,1)}}function dr(a,h){this.name=a,this.prog=h,this.iAttribVertex=-1,this.iNormalVertex=-1,this.iTextureCoords=-1,this.iColor=-1,this.iModelViewProjectionMatrix=-1,this.iWorldMatrix=-1,this.iWorldInverseTranspose=-1,this.iLightWorldPosition=-1,this.iLightDirection=-1,this.iViewWorldPosition=-1,this.iTexture=-1,this.iScalePointLocation=-1,this.iScaleValue=-1,this.iDrawPoint=-1,this.iScalePointWorldLocation=-1,this.Use=function(){c.useProgram(this.prog)}}function wr(){c.clearColor(0,0,0,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.enable(c.CULL_FACE),c.enable(c.DEPTH_TEST);let a=m4.perspective(Math.PI/8,1,8,12),h=Zr.getViewMatrix(),R=m4.translation(0,0,-10),D=m4.multiply(R,h),w=m4.multiply(a,D),L=m4.inverse(D),y=m4.transpose(L);c.uniform3fv(A.iViewWorldPosition,[0,0,0]),c.uniform3fv(A.iLightWorldPosition,ce()),c.uniform3fv(A.iLightDirection,[0,1,0]),c.uniformMatrix4fv(A.iWorldInverseTranspose,!1,y),c.uniformMatrix4fv(A.iModelViewProjectionMatrix,!1,w),c.uniformMatrix4fv(A.iWorldMatrix,!1,D),c.uniform4fv(A.iColor,[.5,.5,.5,1]),c.uniform2fv(A.iScalePointLocation,[ur/360,fr/90]),c.uniform1f(A.iScaleValue,mr),c.uniform1i(A.iTexture,0),Gr.Draw()}let kr=4;function _r(a,h){return a*Math.cos(h)/kr}function Lr(a,h){return a*Math.sin(h)/kr}function yr(a,h,R,D,w,L,y){let V=D*Math.PI/R;return w*Math.pow(Math.E,-L*a)*Math.sin(V*a+y)/kr}function re(){const a=[],h=[],R=[];let D=1e-4,w=1e-4,L=6,y=6,V=4,Q=.5,C=0;for(let G=0;G<=y;G+=.001)for(let I=0;I<2*Math.PI;I+=.5){let nr=_r(G,I),cr=Lr(G,I),rr=yr(G,I,y,L,V,Q,C);a.push(nr,cr,rr);let er=ee(G,I,D,y,L,V,Q,C),or=ne(G,I,w,y,L,V,Q,C),lr=m4.cross(or,er);h.push(lr[0],lr[1],lr[2]),R.push(G/y,I/2*Math.PI)}return[a,h,R]}function ee(a,h,R,D,w,L,y,V){let Q=_r(a,h),C=Lr(a,h),G=yr(a,h,D,w,L,y,V),I=_r(a+R,h),nr=Lr(a+R,h),cr=yr(a+R,h,D,w,L,y,V),rr=(I-Q)/gr(R),er=(nr-C)/gr(R),or=(cr-G)/gr(R);return[rr,er,or]}function ne(a,h,R,D,w,L,y,V){let Q=_r(a,h),C=Lr(a,h),G=yr(a,h,D,w,L,y,V),I=_r(a,h+R),nr=Lr(a,h+R),cr=yr(a,h+R,D,w,L,y,V),rr=(I-Q)/gr(R),er=(nr-C)/gr(R),or=(cr-G)/gr(R);return[rr,er,or]}function oe(){let a=ie(c,Jr,Qr);A=new dr("Basic",a),A.Use(),A.iAttribVertex=c.getAttribLocation(a,"vertex"),A.iNormalVertex=c.getAttribLocation(a,"normal"),A.iTextureCoords=c.getAttribLocation(a,"textcoord"),A.iColor=c.getUniformLocation(a,"color"),A.iModelViewProjectionMatrix=c.getUniformLocation(a,"ModelViewProjectionMatrix"),A.iWorldInverseTranspose=c.getUniformLocation(a,"WorldInverseTranspose"),A.iWorldMatrix=c.getUniformLocation(a,"WorldMatrix"),A.iLightWorldPosition=c.getUniformLocation(a,"LightWorldPosition"),A.iLightDirection=c.getUniformLocation(a,"LightDirection"),A.iViewWorldPosition=c.getUniformLocation(a,"ViewWorldPosition"),A.iTexture=c.getUniformLocation(a,"u_texture"),A.iScalePointLocation=c.getUniformLocation(a,"ScalePointLocation"),A.iScaleValue=c.getUniformLocation(a,"ScaleValue"),A.iDrawPoint=c.getUniformLocation(a,"bDrawpoint"),A.iScalePointWorldLocation=c.getUniformLocation(a,"ScalePointWorldLocation"),Gr=new sr("Surface");let h=re();Gr.BufferData(h[0],h[1],h[2])}function ie(a,h,R){let D=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(D,h),a.compileShader(D),!a.getShaderParameter(D,a.COMPILE_STATUS))throw new Error("Error in vertex shader:  "+a.getShaderInfoLog(D));let w=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(w,R),a.compileShader(w),!a.getShaderParameter(w,a.COMPILE_STATUS))throw new Error("Error in fragment shader:  "+a.getShaderInfoLog(w));let L=a.createProgram();if(a.attachShader(L,D),a.attachShader(L,w),a.linkProgram(L),!a.getProgramParameter(L,a.LINK_STATUS))throw new Error("Link error in program:  "+a.getProgramInfoLog(L));return L}function ae(){let a;try{if(a=document.getElementById("webglcanvas"),c=a.getContext("webgl"),!c)throw"Browser does not support WebGL"}catch{document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not get a WebGL graphics context.</p>";return}try{oe()}catch(h){document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not initialize the WebGL graphics context: "+h+"</p>";return}Zr=new $r(a,wr,0),fe()}const te=[{keys:["ArrowLeft"],func:()=>{Or-=.05,wr()}},{keys:["ArrowRight"],func:()=>{Or-=.05,wr()}},{keys:["W","w"],func:()=>{fr-=5,fr=Tr(fr,0,90)}},{keys:["S","s"],func:()=>{fr+=5,fr=Tr(fr,0,90)}},{keys:["A","a"],func:()=>{ur-=5,ur=Tr(ur,0,360)}},{keys:["D","d"],func:()=>{ur+=5,ur=Tr(ur,0,360)}},{keys:["Q","q"],func:()=>{mr+=.05,mr=Tr(mr,.5,2)}},{keys:["E","e"],func:()=>{mr-=.05,mr=Tr(mr,.5,2)}}];window.addEventListener("keydown",function(a){const h=te.find(R=>R.keys.includes(a.key));h&&(h.func(),wr())});function ce(){const a=Math.sin(Or)*1.2;return[a,-6,-10+a*a]}function ue(a){const h=new Image;h.src="texture.png",h.addEventListener("load",function(){c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h),wr()})}function fe(){const a=c.createTexture();c.bindTexture(c.TEXTURE_2D,a),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),ue(a)}function Tr(a,h,R){return Math.min(Math.max(a,h),R)}document.addEventListener("DOMContentLoaded",ae);
